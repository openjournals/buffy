{"name":"typst","scopeName":"source.typst","patterns":[{"include":"#shebang"},{"include":"#markup"}],"repository":{"arrayOrDict":{"patterns":[{"match":"(\\()\\s*(\\))","captures":{"1":{"name":"meta.brace.round.typst"},"2":{"name":"meta.brace.round.typst"}}},{"match":"(\\()\\s*(:)\\s*(\\))","captures":{"1":{"name":"meta.brace.round.typst"},"2":{"name":"punctuation.separator.colon.typst"},"3":{"name":"meta.brace.round.typst"}}},{"begin":"\\(","end":"\\)|(?=[;\\}\\]])","patterns":[{"include":"#literalContent"}],"beginCaptures":{"0":{"name":"meta.brace.round.typst"}},"endCaptures":{"0":{"name":"meta.brace.round.typst"}}}]},"blockComment":{"name":"comment.block.typst","begin":"\\/\\*","end":"\\*\\/","patterns":[{"include":"#blockComment"}],"beginCaptures":{"0":{"name":"punctuation.definition.comment.typst"}}},"blockRaw":{"patterns":[{"include":"#blockRawGeneral"}]},"blockRawGeneral":{"name":"markup.raw.block.typst","begin":"(`{3,})([\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*\\b)?","end":"(\\1)","beginCaptures":{"1":{"name":"punctuation.definition.raw.begin.typst"},"2":{"name":"fenced_code.block.language.typst"}},"endCaptures":{"1":{"name":"punctuation.definition.raw.end.typst"}}},"callArgs":{"begin":"\\(","end":"\\)|(?=[;\\}\\]])","patterns":[{"include":"#patternOrArgsBody"}],"beginCaptures":{"0":{"name":"meta.brace.round.typst"}},"endCaptures":{"0":{"name":"meta.brace.round.typst"}}},"code":{"patterns":[{"include":"#common"},{"include":"#comments"},{"name":"punctuation.terminator.statement.typst","match":";"},{"include":"#expression"}]},"codeBlock":{"begin":"\\{","end":"\\}","patterns":[{"include":"#code"}],"beginCaptures":{"0":{"name":"meta.brace.curly.typst"}},"endCaptures":{"0":{"name":"meta.brace.curly.typst"}}},"comments":{"patterns":[{"include":"#blockComment"},{"include":"#lineComment"}]},"common":{"patterns":[{"include":"#strictComments"},{"include":"#blockRaw"},{"include":"#inlineRaw"}]},"constants":{"patterns":[{"name":"constant.numeric.length.typst","match":"(?:\\d+\\.(?!\\d)|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)(?\u003c!\\.)(mm|pt|cm|in|em)($|\\b)"},{"name":"constant.numeric.angle.typst","match":"(?:\\d+\\.(?!\\d)|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)(?\u003c!\\.)(rad|deg)($|\\b)"},{"name":"constant.numeric.percentage.typst","match":"(?:\\d+\\.(?!\\d)|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%"},{"name":"constant.numeric.fr.typst","match":"(?:\\d+\\.(?!\\d)|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)(?\u003c!\\.)fr"},{"name":"constant.numeric.integer.typst","match":"(?\u003c!\\)|\\]|\\})(^|(?\u003c=\\s|#)|\\b)\\d+\\b(?!\\.(?:[^\\p{L}\\p{Nl}__]|$)|[eE])"},{"name":"constant.numeric.hex.typst","match":"(?\u003c!\\)|\\]|\\})(^|(?\u003c=\\s|#)|\\b)0x[0-9a-fA-F]+\\b"},{"name":"constant.numeric.octal.typst","match":"(?\u003c!\\)|\\]|\\})(^|(?\u003c=\\s|#)|\\b)0o[0-7]+\\b"},{"name":"constant.numeric.binary.typst","match":"(?\u003c!\\)|\\]|\\})(^|(?\u003c=\\s|#)|\\b)0b[01]+\\b"},{"name":"constant.numeric.float.typst","match":"(?:\\d+\\.(?!\\d)|\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)(?:)"},{"include":"#stringLiteral"},{"include":"#markupMath"}]},"contentBlock":{"begin":"\\[","end":"\\]","patterns":[{"include":"#contentBlock"},{"include":"#markup"}],"beginCaptures":{"0":{"name":"meta.brace.square.typst"}},"endCaptures":{"0":{"name":"meta.brace.square.typst"}}},"contextStatement":{"name":"meta.expr.context.typst","begin":"\\bcontext\\b(?!-)","end":"(?\u003c=[\\}\\]\\d])|(?=[;\\}\\]\\)#\\n]|$)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.control.other.typst"}}},"elseClause":{"name":"keyword.control.conditional.typst","match":"\\belse\\b(?!-)"},"expression":{"patterns":[{"include":"#comments"},{"include":"#arrayOrDict"},{"include":"#contentBlock"},{"name":"keyword.control.conditional.typst","match":"\\b(else)\\b(?!-)"},{"name":"keyword.control.loop.typst","match":"\\b(break|continue)\\b(?!-)"},{"name":"keyword.other.range.typst","match":"\\b(in)\\b(?!-)"},{"name":"keyword.other.logical.typst","match":"\\b(and|or|not)\\b(?!-)"},{"name":"keyword.control.flow.typst","match":"\\b(return)\\b(?!-)"},{"include":"#markupLabel"},{"include":"#blockRaw"},{"include":"#inlineRaw"},{"include":"#codeBlock"},{"include":"#letStatement"},{"include":"#showStatement"},{"include":"#contextStatement"},{"include":"#setStatement"},{"include":"#forStatement"},{"include":"#whileStatement"},{"include":"#ifStatement"},{"include":"#importStatement"},{"include":"#includeStatement"},{"include":"#strictFuncCallOrPropAccess"},{"include":"#primitiveColors"},{"include":"#primitiveFunctions"},{"include":"#primitiveTypes"},{"include":"#keywordConstants"},{"include":"#identifier"},{"include":"#constants"},{"name":"keyword.control.typst","match":"(as)\\b(?!-)"},{"name":"keyword.operator.range.typst","match":"(in)\\b(?!-)"},{"name":"keyword.operator.spread.typst","match":"\\.\\."},{"name":"punctuation.separator.colon.typst","match":":"},{"name":"keyword.operator.accessor.typst","match":"\\."},{"name":"punctuation.separator.comma.typst","match":","},{"name":"storage.type.function.arrow.typst","match":"=\u003e"},{"name":"keyword.operator.relational.typst","match":"==|!=|\u003c=|\u003c|\u003e=|\u003e"},{"begin":"(\\+=|-=|\\*=|\\/=|=)","end":"(?=[\\n;\\}\\]\\)])","patterns":[{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.operator.assignment.typst"}}},{"name":"keyword.operator.arithmetic.typst","match":"\\+|\\\\|\\/|\\*|-"}]},"forClause":{"begin":"(for\\b)\\s*","end":"(?\u003c!(?:\\bwhile)|(?:hile\\s{1})|(?:ile\\s{2})|(?:le\\s{3})|(?:[\\s\\S]{2}(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or))|(?:[\\s\\S](?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or)\\s)|(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or)\\s{2}|(?:if|in|or)\\s{3}|(?:[\\s\\S](?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:and|not))|(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:and|not)\\s|(?:and|not)\\s{2}|(?:[\\s\\S]{4}[=\u003c\u003e\\+\\-\\*\\/])|(?:[\\s\\S]{3}[=\u003c\u003e\\+\\-\\*\\/]\\s)|(?:[\\s\\S]{2}[=\u003c\u003e\\+\\-\\*\\/]\\s{2})|(?:[\\s\\S][=\u003c\u003e\\+\\-\\*\\/]\\s{3})|(?:[=\u003c\u003e\\+\\-\\*\\/]\\s{4}))(?=[\\[\\{])|(?=[;,\\}\\]\\)\\#\\n]|$)","patterns":[{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.control.loop.typst"}}},"forStatement":{"name":"meta.expr.for.typst","begin":"(?=(?:(for\\b(?!-))\\s*))","end":"(?\u003c=[\\}\\]])(?![\\{\\[])|(?=[;\\}\\]\\)\\n]|$)","patterns":[{"include":"#comments"},{"include":"#forClause"},{"include":"#codeBlock"},{"include":"#contentBlock"}]},"identifier":{"name":"variable.other.readwrite.typst","match":"(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*"},"ifClause":{"begin":"\\bif\\b(?!-)","end":"(?\u003c!(?:\\bwhile)|(?:hile\\s{1})|(?:ile\\s{2})|(?:le\\s{3})|(?:[\\s\\S]{2}(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or))|(?:[\\s\\S](?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or)\\s)|(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or)\\s{2}|(?:if|in|or)\\s{3}|(?:[\\s\\S](?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:and|not))|(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:and|not)\\s|(?:and|not)\\s{2}|(?:[\\s\\S]{4}[=\u003c\u003e\\+\\-\\*\\/])|(?:[\\s\\S]{3}[=\u003c\u003e\\+\\-\\*\\/]\\s)|(?:[\\s\\S]{2}[=\u003c\u003e\\+\\-\\*\\/]\\s{2})|(?:[\\s\\S][=\u003c\u003e\\+\\-\\*\\/]\\s{3})|(?:[=\u003c\u003e\\+\\-\\*\\/]\\s{4}))(?=[\\[\\{])|(?=[;,\\}\\]\\)\\#\\n]|$)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.control.conditional.typst"}}},"ifStatement":{"name":"meta.expr.if.typst","begin":"(?=(?:(else\\s+)?(if\\b(?!-))))","end":"(?\u003c=\\}|\\])(?!\\s*(else)\\b(?!-)|[\\[\\{])|(?\u003c=else)(?!\\s*(?:if\\b(?!-)|[\\[\\{]))|(?=[;\\}\\]\\)\\n]|$)","patterns":[{"include":"#comments"},{"include":"#ifClause"},{"include":"#elseClause"},{"include":"#codeBlock"},{"include":"#contentBlock"}]},"importAsClause":{"begin":"(\\bas\\b)\\s*","end":"(?=[\\s;\\}\\]\\)\\:])","patterns":[{"include":"#comments"},{"include":"#identifier"}],"beginCaptures":{"1":{"name":"keyword.control.import.typst"}}},"importPathClause":{"begin":"(\\bimport\\b(?!-))\\s*","end":"(?=\\:|as)","patterns":[{"include":"#comments"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.control.import.typst"}}},"importStatement":{"name":"meta.expr.import.typst","begin":"(\\bimport\\b(?!-))\\s*","end":"(?=[\\n;\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#importPathClause"},{"name":"punctuation.separator.colon.typst","match":"\\:"},{"name":"keyword.operator.wildcard.typst","match":"\\*"},{"name":"punctuation.separator.comma.typst","match":"\\,"},{"include":"#importAsClause"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.control.import.typst"}}},"includeStatement":{"name":"meta.expr.include.typst","begin":"(\\binclude\\b(?!-))\\s*","end":"(?=[\\n;\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.control.import.typst"}}},"inlineRaw":{"name":"markup.raw.inline.typst string.other.raw.typst","begin":"`","end":"`","beginCaptures":{"0":{"name":"punctuation.definition.raw.inline.typst"}},"endCaptures":{"0":{"name":"punctuation.definition.raw.inline.typst"}}},"keywordConstants":{"patterns":[{"name":"keyword.other.none.typst","match":"(?\u003c!\\)|\\]|\\})\\bnone\\b(?!-)"},{"name":"keyword.other.auto.typst","match":"(?\u003c!\\)|\\]|\\})\\bauto\\b(?!-)"},{"name":"constant.language.boolean.typst","match":"(?\u003c!\\)|\\]|\\})\\b(false|true)\\b(?!-)"}]},"letBindingClause":{"begin":"(let\\b(?!-))\\s*","end":"(?=[=;\\]}\\n])","patterns":[{"include":"#comments"},{"begin":"(\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*)(\\()","end":"\\)|(?=[;\\}\\]])","patterns":[{"include":"#patternOrArgsBody"}],"beginCaptures":{"1":{"name":"entity.name.function.typst","patterns":[{"include":"#primitiveFunctions"}]},"2":{"name":"meta.brace.round.typst"}},"endCaptures":{"0":{"name":"meta.brace.round.typst"}}},{"begin":"\\(","end":"\\)|(?=[;\\}\\]])","patterns":[{"include":"#patternOrArgsBody"}],"beginCaptures":{"0":{"name":"meta.brace.round.typst"}},"endCaptures":{"0":{"name":"meta.brace.round.typst"}}},{"include":"#identifier"}],"beginCaptures":{"1":{"name":"storage.type.typst"}}},"letInitClause":{"begin":"=\\s*","end":"(?=[\\n;\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.operator.assignment.typst"}}},"letStatement":{"name":"meta.expr.let.typst","begin":"(?=(?:(let\\b(?!-))))","end":"(?!\\=)(?=[\\s;\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#letBindingClause"},{"include":"#letInitClause"}]},"lineComment":{"name":"comment.line.double-slash.typst","begin":"\\/\\/","end":"(?=$|\\n)","beginCaptures":{"0":{"name":"punctuation.definition.comment.typst"}}},"literalContent":{"patterns":[{"include":"#paramOrArgName"},{"include":"#expression"}]},"markup":{"patterns":[{"include":"#common"},{"include":"#markupEnterCode"},{"include":"#markupEscape"},{"name":"punctuation.definition.linebreak.typst","match":"\\\\"},{"name":"punctuation.definition.nonbreaking-space.typst","match":"\\~"},{"name":"punctuation.definition.shy.typst","match":"-\\?"},{"name":"punctuation.definition.em-dash.typst","match":"---"},{"name":"punctuation.definition.en-dash.typst","match":"--"},{"name":"punctuation.definition.ellipsis.typst","match":"\\.\\.\\."},{"include":"#markupBold"},{"include":"#markupItalic"},{"include":"#markupLink"},{"include":"#markupMath"},{"include":"#markupHeading"},{"name":"punctuation.definition.list.unnumbered.typst","match":"^\\s*-\\s+"},{"name":"punctuation.definition.list.numbered.typst","match":"^\\s*([0-9]+\\.|\\+)\\s+"},{"include":"#markupLabel"},{"include":"#markupReference"},{"include":"#markupBrace"}]},"markupBold":{"name":"markup.bold.typst","begin":"(?:(^\\*|\\*$|((?\u003c=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}])\\*)|(\\*(?=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}]))))","end":"(?:(^\\*|\\*$|((?\u003c=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}])\\*)|(\\*(?=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}]))))|\\n|(?=\\])","patterns":[{"include":"#markup"}],"beginCaptures":{"0":{"name":"punctuation.definition.bold.typst"}},"endCaptures":{"0":{"name":"punctuation.definition.bold.typst"}}},"markupBrace":{"name":"markup.content.brace.typst","match":"[{}()\\[\\]]"},"markupEnterCode":{"patterns":[{"match":"(#)\\s","captures":{"1":{"name":"punctuation.definition.hash.typst"}}},{"match":"(#)(;)","captures":{"1":{"name":"punctuation.definition.hash.typst"},"2":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=(?:break|continue|and|or|not|return|as|in|include|import|let|else|if|for|while|context|set|show)\\b(?!-))","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.control.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=(?:any|str|int|float|bool|type|length|content|array|dictionary|arguments)\\b(?!-))","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"entity.name.type.primitive.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=(?:none)\\b(?!-))","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.other.none.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=(?:false|true)\\b(?!-))","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"constant.language.boolean.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*[\\(\\[])","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"entity.name.function.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=[\\p{L}\\p{Nl}__])","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"variable.other.readwrite.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=\\\")","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"string.hash.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?=\\d|\\.\\d)","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"constant.numeric.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}},{"begin":"#(?:)","end":"(?\u003c=;)|(?\u003c=[\\}\\]\\)])(?![;\\(\\[\\$]|(?:\\.(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=[\\(\\[])))|(?\u003c!#)(?=[\"\\_])|(?=\\.(?:[^0-9\\p{L}\\p{Nl}__]|$))|(?=[\\s,\\}\\]\\)\\#\\$\\*]|$)|(;)","patterns":[{"include":"#expression"}],"beginCaptures":{"0":{"name":"keyword.control.hash.typst"}},"endCaptures":{"1":{"name":"punctuation.terminator.statement.typst"}}}]},"markupEscape":{"name":"constant.character.escape.content.typst","match":"\\\\(?:[^u]|u\\{?[0-9a-zA-Z]*\\}?)"},"markupHeading":{"name":"markup.heading.typst","begin":"^\\s*(=+)(?:(?=[\\r\\n]|$)|[^\\S\\n]+)","end":"\\n|(?=\u003c)","patterns":[{"include":"#markup"}],"beginCaptures":{"1":{"name":"punctuation.definition.heading.typst"}}},"markupItalic":{"name":"markup.italic.typst","begin":"(?:(^_|_$|((?\u003c=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}])_)|(_(?=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}]))))","end":"(?:(^_|_$|((?\u003c=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}])_)|(_(?=[\\W\\p{Han}\\p{Hangul}\\p{Katakana}\\p{Hiragana}]))))|\\n|(?=\\])","patterns":[{"include":"#markup"}],"beginCaptures":{"0":{"name":"punctuation.definition.italic.typst"}},"endCaptures":{"0":{"name":"punctuation.definition.italic.typst"}}},"markupLabel":{"name":"string.other.label.typst","match":"\u003c[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-\\.:]*\u003e"},"markupLink":{"name":"markup.underline.link.typst","begin":"(?:https?):\\/\\/","end":"(?=[\\s\\]\\)]|(?=[!,.:;?'](?:[\\s\\]\\)]|$)))","patterns":[{"include":"#markupLinkParen"},{"include":"#markupLinkBracket"},{"match":"(^|\\G)(?:[0-9a-zA-Z#$%\u0026*\\+\\-\\/\\=\\@\\_\\~]+|(?:[!,.:;?']+(?![\\s\\]\\)]|$)))"}]},"markupLinkBracket":{"begin":"\\[","end":"\\]|(?=[\\s\\)])","patterns":[{"include":"#markupLink"}]},"markupLinkParen":{"begin":"\\(","end":"\\)|(?=[\\s\\]])","patterns":[{"include":"#markupLink"}]},"markupMath":{"name":"markup.math.typst","begin":"\\$","end":"\\$","patterns":[{"include":"#math"}],"beginCaptures":{"0":{"name":"punctuation.definition.string.begin.math.typst"}},"endCaptures":{"0":{"name":"punctuation.definition.string.end.math.typst"}}},"markupReference":{"name":"string.other.reference.typst","match":"(@)[\\p{L}\\p{Nl}__](?:[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]|[\\.:](?!:\\s|$|([\\.:]*[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-\\.:])))*","captures":{"1":{"name":"punctuation.definition.reference.typst"}}},"math":{"patterns":[{"include":"#markupEscape"},{"include":"#stringLiteral"},{"include":"#markupEnterCode"},{"begin":"([_^\\/√∛∜])\\s*([\\[\\(\\{⌈⌊⌜⌞❲⟦⟨⟪⟬⟮⦃⦅⦇⦉⦋⦍⦏⦑⦓⦕⦗⧘⧚⧼])","end":"([\\]\\)\\}⌉⌋⌝⌟❳⟧⟩⟫⟭⟯⦄⦆⦈⦊⦌⦎⦐⦒⦔⦖⦘⧙⧛⧽])|(?=\\$)|$","patterns":[{"include":"#mathParen"},{"include":"#math"}],"beginCaptures":{"1":{"name":"punctuation.math.operator.typst"},"2":{"name":"constant.other.symbol.typst"}},"endCaptures":{"0":{"name":"constant.other.symbol.typst"}}},{"name":"punctuation.math.operator.typst","match":"[_^'\u0026\\/√∛∜]"},{"include":"#strictMathFuncCallOrPropAccess"},{"include":"#mathPrimary"},{"include":"#mathMoreBrace"}]},"mathBrace":{"name":"markup.content.brace.typst","match":"[{}]"},"mathCallArgs":{"begin":"\\(","end":"\\)|(?=\\$)","patterns":[{"include":"#comments"},{"include":"#mathParen"},{"name":"punctuation.separator.comma.typst","match":","},{"include":"#math"}],"beginCaptures":{"0":{"name":"meta.brace.round.typst"}},"endCaptures":{"0":{"name":"meta.brace.round.typst"}}},"mathIdentifier":{"name":"variable.other.readwrite.typst","match":"(?:(?\u003c=_)|\\b)(?:(?!_)[\\p{L}\\p{Nl}_])(?:(?!_)[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])+"},"mathMoreBrace":{"name":"markup.content.brace.typst","match":"[{}()\\[\\]]"},"mathParen":{"begin":"[\\[\\(\\{⌈⌊⌜⌞❲⟦⟨⟪⟬⟮⦃⦅⦇⦉⦋⦍⦏⦑⦓⦕⦗⧘⧚⧼]","end":"([\\]\\)\\}⌉⌋⌝⌟❳⟧⟩⟫⟭⟯⦄⦆⦈⦊⦌⦎⦐⦒⦔⦖⦘⧙⧛⧽])|(?=\\$)|$","patterns":[{"include":"#mathParen"},{"include":"#math"}],"beginCaptures":{"0":{"name":"markup.content.brace.typst"}},"endCaptures":{"0":{"name":"markup.content.brace.typst"}}},"mathPrimary":{"begin":"(?:(?\u003c=_)|\\b)(?:(?!_)[\\p{L}\\p{Nl}_])(?:(?!_)[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])+","end":"(?!(?:\\(|\\.[\\p{L}\\p{Nl}_]))|(?=\\$)","patterns":[{"include":"#strictMathFuncCallOrPropAccess"},{"match":"(\\.)((?:(?!_)[\\p{L}\\p{Nl}_])(?:(?!_)[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])*)","captures":{"1":{"name":"keyword.operator.accessor.typst"},"2":{"name":"variable.other.readwrite.typst"}}},{"include":"#mathCallArgs"},{"include":"#mathIdentifier"}],"beginCaptures":{"0":{"name":"variable.other.readwrite.typst"}}},"paramOrArgName":{"match":"(?!(show|import|include)\\s*\\:)((?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*)\\s*(\\:)","captures":{"2":{"name":"variable.other.readwrite.typst"},"3":{"name":"punctuation.separator.colon.typst"}}},"patternOrArgsBody":{"patterns":[{"include":"#comments"},{"include":"#paramOrArgName"},{"include":"#expression"}]},"primitiveColors":{"name":"variable.other.constant.builtin.typst","match":"\\b(red|blue|green|black|white|gray|silver|eastern|navy|aqua|teal|purple|fuchsia|maroon|orange|yellow|olive|lime|ltr|rtl|ttb|btt|start|left|center|right|end|top|horizon|bottom)\\b(?!-)"},"primitiveFunctions":{"name":"support.function.builtin.typst","match":"\\b(?:luma|oklab|oklch|rgb|cmyk|range)\\b(?!-)"},"primitiveTypes":{"name":"entity.name.type.primitive.typst","match":"\\b(any|str|int|float|bool|type|length|content|array|dictionary|arguments)\\b(?!-)"},"setClause":{"begin":"(set\\b)\\s+","end":"(?=if)|(?=[\\n;\\{\\[\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#strictFuncCallOrPropAccess"},{"include":"#identifier"}],"beginCaptures":{"1":{"name":"keyword.control.other.typst"}}},"setIfClause":{"begin":"(if\\b(?!-))\\s*","end":"(?\u003c=\\S)(?\u003c!and|or|not|in|!=|==|\u003c=|\u003e=|\u003c|\u003e|\\+|-|\\*|\\/|=|\\+=|-=|\\*=|\\/=)(?!\\s*(?:and|or|not|in|!=|==|\u003c=|\u003e=|\u003c|\u003e|\\+|-|\\*|\\/|=|\\+=|-=|\\*=|\\/=|\\.))|(?=[\\n;\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.control.conditional.typst"}}},"setStatement":{"name":"meta.expr.set.typst","begin":"(?=(?:(set\\b(?!-))\\s*(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*))","end":"(?\u003c=\\))(?!\\s*if\\b)|(?=[\\s;\\{\\[\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#setClause"},{"include":"#setIfClause"}]},"shebang":{"name":"comment.line.shebang.typst","begin":"^(#!)","end":"\\n","beginCaptures":{"1":{"name":"punctuation.definition.comment.line.shebang.typst"}}},"showAnyClause":{"match":"(show\\b)\\s*(?=\\:)","captures":{"1":{"name":"keyword.control.other.typst"}}},"showSelectClause":{"begin":"(show\\b)\\s*","end":"(?=[:;\\}\\]\\n])","patterns":[{"include":"#comments"},{"include":"#markupLabel"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.control.other.typst"}}},"showStatement":{"name":"meta.expr.show.typst","begin":"(?=(?:(show\\b(?!-))))","end":"(?=[\\s;\\{\\[\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#showAnyClause"},{"include":"#showSelectClause"},{"include":"#showSubstClause"}]},"showSubstClause":{"begin":"(\\:)\\s*","end":"(?=[\\n;\\}\\]\\)])","patterns":[{"include":"#comments"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"punctuation.separator.colon.typst"}}},"strictComments":{"patterns":[{"include":"#blockComment"},{"include":"#strictLineComment"}]},"strictFuncCallOrPropAccess":{"name":"meta.expr.call.typst","begin":"(?=(?:(\\.)?(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=\\(|\\[)))","end":"(?:(?\u003c=\\)|\\])(?![\\[\\(\\.]))|(?=[\\s;,\\}\\]\\)\\#]|$)","patterns":[{"name":"keyword.operator.accessor.typst","match":"\\."},{"match":"(?\u003c!\\)|\\]|\\})\\b[\\p{L}\\p{Nl}__][\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}_\\-]*(?=\\(|\\[)","captures":{"0":{"patterns":[{"include":"#primitiveFunctions"},{"include":"#primitiveTypes"},{"name":"entity.name.function.typst","match":".*"}]}}},{"include":"#identifier"},{"match":"(\\()\\s*(\\))","captures":{"1":{"name":"meta.brace.round.typst"},"2":{"name":"meta.brace.round.typst"}}},{"include":"#callArgs"},{"include":"#contentBlock"}]},"strictLineComment":{"name":"comment.line.double-slash.typst","begin":"(?\u003c!:)\\/\\/","end":"(?=$|\\n)","beginCaptures":{"0":{"name":"punctuation.definition.comment.typst"}}},"strictMathFuncCallOrPropAccess":{"name":"meta.expr.call.typst","begin":"(?=(?:(?:(\\.)((?:(?!_)[\\p{L}\\p{Nl}_])(?:(?!_)[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])*)|(?:(?\u003c=_)|\\b)(?:(?!_)[\\p{L}\\p{Nl}_])(?:(?!_)[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])+)(?=\\()))","end":"(?:(?\u003c=[\\)])(?![\\(\\.]|(?:(?\u003c=_)|\\b)(?:(?!_)[\\p{L}\\p{Nl}_])(?:(?!_)[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])+(?=\\()))|(?=[\\$\\s;,\\}\\]\\)]|$)","patterns":[{"name":"keyword.operator.accessor.typst","match":"\\."},{"name":"entity.name.function.typst","match":"(?:(?\u003c=_)|\\b)(?:(?!_)[\\p{L}\\p{Nl}_])(?:(?!_)[\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])+(?=\\()","captures":{"0":{"name":"entity.name.function.typst","patterns":[{"include":"#primitiveFunctions"},{"include":"#primitiveTypes"},{"name":"entity.name.function.typst","match":".*"}]}}},{"include":"#mathIdentifier"},{"match":"(\\()\\s*(\\))","captures":{"1":{"name":"meta.brace.round.typst"},"2":{"name":"meta.brace.round.typst"}}},{"include":"#mathCallArgs"}]},"stringLiteral":{"name":"string.quoted.double.typst","begin":"\"","end":"\"","patterns":[{"match":"(\\\\(?:[^u]|u\\{?[0-9a-zA-Z]*\\}?))|[^\\\\\"]+","captures":{"1":{"name":"constant.character.escape.string.typst"}}}],"beginCaptures":{"0":{"name":"punctuation.definition.string.typst"}},"endCaptures":{"0":{"name":"punctuation.definition.string.typst"}}},"whileClause":{"begin":"(while\\b)\\s*","end":"(?\u003c!(?:\\bwhile)|(?:hile\\s{1})|(?:ile\\s{2})|(?:le\\s{3})|(?:[\\s\\S]{2}(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or))|(?:[\\s\\S](?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or)\\s)|(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:if|in|or)\\s{2}|(?:if|in|or)\\s{3}|(?:[\\s\\S](?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:and|not))|(?:\\s|[^\\p{L}\\p{Nl}\\p{Mn}\\p{Mc}\\p{Nd}\\p{Pc}])(?:and|not)\\s|(?:and|not)\\s{2}|(?:[\\s\\S]{4}[=\u003c\u003e\\+\\-\\*\\/])|(?:[\\s\\S]{3}[=\u003c\u003e\\+\\-\\*\\/]\\s)|(?:[\\s\\S]{2}[=\u003c\u003e\\+\\-\\*\\/]\\s{2})|(?:[\\s\\S][=\u003c\u003e\\+\\-\\*\\/]\\s{3})|(?:[=\u003c\u003e\\+\\-\\*\\/]\\s{4}))(?=[\\[\\{])|(?=[;,\\}\\]\\)\\#\\n]|$)","patterns":[{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.control.loop.typst"}}},"whileStatement":{"name":"meta.expr.while.typst","begin":"(?=(?:(while\\b(?!-))))","end":"(?\u003c=[\\}\\]])(?![\\{\\[])|(?=[;\\}\\]\\)\\n]|$)","patterns":[{"include":"#comments"},{"include":"#whileClause"},{"include":"#codeBlock"},{"include":"#contentBlock"}]}}}
