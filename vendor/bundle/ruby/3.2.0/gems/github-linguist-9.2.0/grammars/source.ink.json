{"name":"ink","scopeName":"source.ink","patterns":[{"include":"#comment"},{"include":"#tag"},{"include":"#todo"},{"include":"#import"},{"include":"#declaration"},{"include":"#knot"},{"include":"#stitch"},{"include":"#choice"},{"include":"#divert"},{"include":"#gather"},{"include":"#logic"},{"include":"#glue"},{"include":"#interpolevaluablock"}],"repository":{"alternativeClause":{"patterns":[{"begin":"^(?:[^\\S\\n\\r])*(-(?!\u003e))","end":"(?=^)|(?=\\})|(?=\\-)","patterns":[{"include":"#comment"},{"include":"#interpolevaluablock"},{"include":"#divert"},{"include":"#logic"},{"include":"#choice"},{"include":"#comment"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}}}]},"alternativeItem":{"patterns":[{"begin":"(?\u003c!\\\\)(\\|)","end":"(?=\\})|(?=\\|)","patterns":[{"include":"#languageLiteral"},{"include":"#numberLiteral"},{"include":"#stringLiteral"},{"include":"#comment"},{"include":"#interpolevaluablock"},{"include":"#divert"},{"include":"#tag"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}}}]},"assignment":{"patterns":[{"begin":"([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)(?:[^\\S\\n\\r])*(=)","end":"(?=$)","patterns":[{"include":"#comment"},{"include":"#languageLiteral"},{"include":"#numberLiteral"},{"include":"#stringLiteral"},{"include":"#divert"},{"include":"#expressionIdentifier"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"entity.name.variable.other.ink"},"2":{"name":"keyword.operator.assignment.ink"}}}]},"caseClause":{"patterns":[{"begin":"^(?:[^\\S\\n\\r])*(-(?!\u003e))(?:[^\\S\\n\\r])?(else|[^\\|\\{\\}\\:]+)(?:[^\\S\\n\\r])*(?\u003c!\\\\)(\\:)","end":"(?=^)|(?=\\})|(?=\\-)","patterns":[{"include":"#interpolevaluablock"},{"include":"#divert"},{"include":"#logic"},{"include":"#glue"},{"include":"#choiceInClause"},{"include":"#tag"},{"include":"#comment"}],"beginCaptures":{"1":{"name":"keyword.control.ink"},"2":{"name":"keyword.control.ink"},"3":{"name":"keyword.control.ink"}}}]},"choice":{"patterns":[{"begin":"(?x)\n (?\u003c=^|\\-)\n (?:[^\\S\\n\\r])*\n (?:\n   ((?:(?:[^\\S\\n\\r])*[\\*])+)\n   |\n   ((?:(?:[^\\S\\n\\r])*[\\+])+)\n )","end":"(?=\\#|$)","patterns":[{"include":"#comment"},{"include":"#label"},{"include":"#inlineConditionalSubstitution"},{"include":"#textSuppression"},{"include":"#divert"},{"include":"#tag"},{"include":"#glue"},{"include":"#logic"}],"beginCaptures":{"1":{"name":"keyword.choice.ink"},"2":{"name":"keyword.choice.sticky.ink"}}}]},"choiceInClause":{"patterns":[{"begin":"(?x)\n (?\u003c=^|\\-|\\:)\n (?:[^\\S\\n\\r])*\n (?:\n   ((?:(?:[^\\S\\n\\r])*[\\*])+)\n   |\n   ((?:(?:[^\\S\\n\\r])*[\\+])+)\n )","end":"(?=\\#|$)","patterns":[{"include":"#comment"},{"include":"#label"},{"include":"#inlineConditionalSubstitution"},{"include":"#textSuppression"},{"include":"#divert"},{"include":"#tag"},{"include":"#glue"},{"include":"#logic"}],"beginCaptures":{"2":{"name":"keyword.choice.ink"},"3":{"name":"keyword.choice.sticky.ink"}}}]},"commas":{"patterns":[{"name":"punctuation.separator.ink","match":"\\,"}]},"comment":{"patterns":[{"name":"comment.block.ink","begin":"(/\\*)","end":"(\\*/)","beginCaptures":{"1":{"name":"punctuation.definition.comment.ink"}},"endCaptures":{"1":{"name":"punctuation.definition.comment.ink"}}},{"name":"comment.line.ink","begin":"(\\/\\/)","end":"(?=$)","beginCaptures":{"1":{"name":"punctuation.definition.comment.ink"}}}]},"conditionalSubstitution":{"patterns":[{"begin":"((?:[^\\{\\}\\|]|\\|(?=\\|))+(?:[^\\S\\n\\r])*\\:)(?:[^\\S\\n\\r])*(?!$)","end":"(?=\\})","patterns":[{"include":"#comment"},{"include":"#divert"},{"include":"#glue"},{"include":"#inlineElseClause"},{"include":"#interpolevaluablock"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}}}]},"constAssignment":{"patterns":[{"begin":"([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)(?:[^\\S\\n\\r])*(=)","end":"(?=$)","patterns":[{"include":"#comment"},{"include":"#languageLiteral"},{"include":"#numberLiteral"},{"include":"#stringLiteral"},{"include":"#divert"},{"include":"#expressionIdentifier"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"variable.other.constant.ink entity.name.variable.other.constant.ink"},"2":{"name":"keyword.operator.assignment.ink"}}}]},"declaration":{"patterns":[{"begin":"(?:^)(?:[^\\S\\n\\r])*((VAR)|(LIST))(?:[^\\S\\n\\r])*","end":"(?=$)","patterns":[{"include":"#assignment"},{"include":"#comment"}],"beginCaptures":{"1":{"name":"storage.type.ink"},"2":{"name":"storage.type.var.ink"},"3":{"name":"storage.type.list.ink"}}},{"begin":"(?:^)(?:[^\\S\\n\\r])*(CONST)(?:[^\\S\\n\\r])*","end":"(?=$)","patterns":[{"include":"#constAssignment"},{"include":"#comment"}],"beginCaptures":{"1":{"name":"storage.type.const.ink"}}},{"begin":"(?:^)(?:[^\\S\\n\\r])*(EXTERNAL)(?:[^\\S\\n\\r])*","end":"(?=$)","patterns":[{"include":"#externalFunctionDeclaration"},{"include":"#comment"}],"beginCaptures":{"1":{"name":"storage.type.external.ink"}}}]},"divert":{"patterns":[{"begin":"(?:[^\\S\\n\\r])*(-\u003e|\u003c-)(?:[^\\S\\n\\r])*","end":"(?=($|\\}|\\)|\\||\\-|\\#))","patterns":[{"include":"#comment"},{"include":"#function"},{"include":"#divertIdentifier"},{"include":"#tunnel"}],"beginCaptures":{"1":{"name":"keyword.divert.ink keyword.other.ink"}}}]},"divertIdentifier":{"patterns":[{"begin":"(?x) (?:[^\\S\\n\\r])* (?:\n  (END|DONE)\n  |\n  (?:\n    ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)\n    (?:\n      (\\.)\n      ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)\n      (?:\n        (\\.)\n        ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)\n      )?\n    )?\n  )\n)","end":"(?=($|\\}|\\)|\\||\\#))","patterns":[{"include":"#comment"},{"include":"#tunnel"}],"beginCaptures":{"1":{"name":"support.constant.ink constant.language.divert constant.language.ink"},"2":{"name":"variable.other.knot.ink entity.name.variable.other.knot.ink"},"3":{"name":"punctuation.accessor.ink"},"4":{"name":"variable.other.stitch.ink entity.name.variable.other.stitch.ink"},"5":{"name":"punctuation.accessor.ink"},"6":{"name":"variable.other.label.ink entity.name.variable.other.label.ink"}}}]},"expression":{"patterns":[{"include":"#comment"},{"include":"#parentheses"},{"include":"#function"},{"include":"#operator"},{"include":"#languageLiteral"},{"include":"#stringLiteral"},{"include":"#expressionIdentifier"},{"include":"#numberLiteral"},{"include":"#commas"}]},"expressionIdentifier":{"patterns":[{"match":"(?x)\n  (?:(?\u003c=return) |\n     (?\u003c=\u0026\u0026) | (?\u003c=\\|\\|) |\n     (?\u003c=\\=) |\n     (?\u003c=/)  | (?\u003c=%)    | (?\u003c=\\*) | (?\u003c=\\+) | (?\u003c=\\-) |\n     (?\u003c=\\?) | (?\u003c=!\\?)  | (?\u003c=\\^) | (?\u003c=\\~) |\n     (?\u003c=,)  | (?=\\)))\n  (?:[^\\S\\n\\r])*\n  ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*\n  (?:\\.[a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)?)","captures":{"1":{"name":"entity.name.variable.other.ink"}}},{"match":"(?x)\n  (?:[^\\S\\n\\r])*\n  (?:(?\u003c=not) | (?\u003c=and) | (?\u003c=or) | (?\u003c=has) | (?\u003c=hasnt) | (?\u003c=mod))\n  [^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]\n  ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*\n  (?:\\.[a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)?)","captures":{"1":{"name":"entity.name.variable.other.ink"}}},{"match":"(?x)\n  (?:[^\\S\\n\\r])*\n  ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*\n  (?:\\.[a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)?)\n  (?:[^\\S\\n\\r])*\n  (?:(?=\u0026\u0026) | (?=\\|\\|) |\n     (?=\\=) | (?=!\\=)  | (?=\\\u003e) | (?=\\\u003c) |\n     (?=/)  | (?=%)    | (?=\\*) | (?=\\+) | (?=\\-) |\n     (?=\\?) | (?=!\\?)  | (?=\\^) |\n     (?=,)  | (?=\\)))","captures":{"1":{"name":"entity.name.variable.other.ink"}}},{"match":"(?x)\n  (?:[^\\S\\n\\r])*\n  ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*\n  (?:\\.[a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)?)\n  [^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]\n  (?:(?=not) | (?=and) | (?=or) | (?=has) | (?=hasnt) | (?=mod))","captures":{"1":{"name":"entity.name.variable.other.ink"}}}]},"externalFunctionDeclaration":{"patterns":[{"begin":"([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)(?:[^\\S\\n\\r])*","end":"(?\u003c=\\))","patterns":[{"include":"#functionDeclarationParameters"}],"beginCaptures":{"1":{"name":"entity.name.function.ink"}}}]},"firstAlternativeItem":{"patterns":[{"begin":"(?\u003c=\\{)(?:[^\\S\\n\\r])*(\u0026|!|~)","end":"(?=\\|)","patterns":[{"include":"#languageLiteral"},{"include":"#numberLiteral"},{"include":"#stringLiteral"},{"include":"#divert"},{"include":"#tag"},{"include":"#comment"},{"include":"#conditionalSubstitution"},{"include":"#interpolevaluablock"}],"beginCaptures":{"1":{"name":"keyword.control.ink keyword.alternative.type.ink"}}}]},"function":{"patterns":[{"begin":"(?:[^\\S\\n\\r])*((LIST_COUNT|LIST_MIN|LIST_MAX|LIST_ALL|LIST_INVERT|LIST_RANDOM|CHOICE_COUNT|TURNS_SINCE|LIST_RANGE|TURNS|POW|FLOOR|CEILING|INT|FLOAT)|([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*))(?:[^\\S\\n\\r])*(\\()(?:[^\\S\\n\\r])*","end":"(\\))","patterns":[{"include":"#comment"},{"name":"punctuation.separator.ink","match":","},{"include":"#divert"},{"include":"#expression"}],"beginCaptures":{"2":{"name":"constant.language.ink"},"3":{"name":"entity.name.function.ink"},"4":{"name":"punctuation.section.parens.begin.ink"}},"endCaptures":{"1":{"name":"punctuation.section.parens.end.ink"}}}]},"functionDeclaration":{"patterns":[{"begin":"(?x)(?:[^\\S\\n\\r])*(function)(?:[^\\S\\n\\r])*([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)(?:[^\\S\\n\\r])*","end":"(?\u003c=\\))|(?=$)|(?=\\=)","patterns":[{"include":"#comment"},{"include":"#functionDeclarationParameters"}],"beginCaptures":{"1":{"name":"storage.type.ink"},"2":{"name":"entity.name.function.ink"}}}]},"functionDeclarationParameters":{"patterns":[{"begin":"(\\()","end":"(\\))","patterns":[{"include":"#comment"},{"name":"storage.modifier.ref.ink","match":"ref"},{"name":"variable.parameter.function.ink","match":"[a-zA-Z0-9_]+"},{"name":"punctuation.separator.ink","match":","},{"include":"#divert"}],"beginCaptures":{"1":{"name":"punctuation.section.parens.begin.ink"}},"endCaptures":{"1":{"name":"punctuation.section.parens.end.ink"}}}]},"gather":{"patterns":[{"begin":"(?\u003c=^)(?:[^\\S\\n\\r])*((?:(?:[^\\S\\n\\r])*\\-(?!\u003e))+)","end":"(?=$)","patterns":[{"include":"#comment"},{"include":"#choice"},{"include":"#label"},{"include":"#divert"},{"include":"#todo"},{"include":"#glue"},{"include":"#logic"},{"include":"#tag"},{"include":"#interpolevaluablock"}],"beginCaptures":{"1":{"name":"keyword.gather.ink"}}}]},"glue":{"patterns":[{"name":"keyword.glue.ink keyword.other.ink","match":"\u003c\u003e"}]},"import":{"patterns":[{"match":"(?:^)(?:[^\\S\\n\\r])*(INCLUDE)(?:(?:[^\\S\\n\\r])*)(.*)$","captures":{"1":{"name":"keyword.control.import.ink"},"2":{"name":"string.quoted.other.ink"}}}]},"inlineCondition":{"patterns":[{"name":"keyword.control.ink","match":"([^\\{\\}]*)","captures":{"1":{"name":"keyword.control.ink"}}}]},"inlineConditionalSubstitution":{"patterns":[{"begin":"(?\u003c!\\\\)(\\{)","end":"(?\u003c!\\\\)(\\})","patterns":[{"include":"#conditionalSubstitution"},{"include":"#substitution"},{"include":"#firstAlternativeItem"},{"include":"#alternativeItem"},{"include":"#interpolevaluablock"},{"include":"#inlineCondition"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}},"endCaptures":{"1":{"name":"keyword.control.ink"}}}]},"inlineElseClause":{"patterns":[{"begin":"(?\u003c!\\\\)(\\|)","end":"(?=\\})","patterns":[{"include":"#comment"},{"include":"#divert"},{"include":"#interpolevaluablock"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}}}]},"interpolatedIdentifier":{"patterns":[{"name":"entity.name.variable.other.ink","match":"(?\u003c=\\{)(?\u003c!^)(?:[^\\S\\n\\r])*[a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*(\\.[a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)?(?:[^\\S\\n\\r])*(?!$)(?=\\})"}]},"interpolevaluablock":{"patterns":[{"begin":"(?\u003c!\\\\)(\\{)","end":"(?\u003c!\\\\)(\\})","patterns":[{"include":"#multilineAlternative"},{"include":"#multilineBlock"},{"include":"#conditionalSubstitution"},{"include":"#divert"},{"include":"#substitution"},{"include":"#firstAlternativeItem"},{"include":"#alternativeItem"},{"include":"#interpolevaluablock"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}},"endCaptures":{"1":{"name":"keyword.control.ink"}}}]},"knot":{"patterns":[{"begin":"^(?:[^\\S\\n\\r])*(={2,})","end":"(={2,})|(?=$)","patterns":[{"include":"#comment"},{"include":"#functionDeclaration"},{"include":"#knotStitchDeclaration"}],"beginCaptures":{"1":{"name":"storage.knot.ink storage.type.ink"}},"endCaptures":{"1":{"name":"storage.knot.ink storage.type.ink"}}}]},"knotStitchDeclaration":{"patterns":[{"begin":"(?:[^\\S\\n\\r])*([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)(?:[^\\S\\n\\r])*","end":"(?\u003c=\\))|(?=$|\\=|\\/\\/)","patterns":[{"include":"#comment"},{"include":"#functionDeclarationParameters"}],"beginCaptures":{"1":{"name":"entity.name.function.ink"}}}]},"label":{"patterns":[{"name":"string.label.ink entity.name.label.ink string.quoted.other.ink","match":"(\\()(?:[^\\S\\n\\r])*[a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*(?:[^\\S\\n\\r])*(\\))","captures":{"1":{"name":"punctuation.definition.string.label.begin.ink punctuation.definition.string.begin.ink"},"2":{"name":"punctuation.definition.string.label.begin.ink punctuation.definition.string.begin.ink"}}}]},"languageLiteral":{"patterns":[{"match":"(?:[^\\S\\n\\r])*(false|true)(?:[^\\S\\n\\r])*","captures":{"1":{"name":"constant.language.boolean.ink constant.language.ink"}}}]},"logic":{"patterns":[{"begin":"(?:(?\u003c=^)|(?\u003c=\\-)|(?\u003c=\\:))(?:[^\\S\\n\\r])*(~)","end":"(?=$)","patterns":[{"include":"#returnStatement"},{"include":"#tempDeclaration"},{"include":"#expression"}],"beginCaptures":{"1":{"name":"keyword.logic.ink"}}}]},"multilineAlternative":{"patterns":[{"begin":"(?\u003c=\\{)(?:[^\\S\\n\\r])*$","end":"(?=\\})","patterns":[{"include":"#comment"},{"include":"#caseClause"},{"include":"#alternativeClause"},{"include":"#divert"},{"include":"#logic"},{"include":"#choice"},{"include":"#glue"},{"include":"#todo"},{"include":"#interpolevaluablock"},{"include":"#comment"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}}}]},"multilineBlock":{"patterns":[{"begin":"([^\\{\\}]+(?:[^\\S\\n\\r])*\\:)(?:[^\\S\\n\\r])*(?=$|\\/\\/)","end":"(?=\\})","patterns":[{"include":"#comment"},{"include":"#caseClause"},{"include":"#alternativeClause"},{"include":"#divert"},{"include":"#logic"},{"include":"#choice"},{"include":"#glue"},{"include":"#todo"},{"include":"#interpolevaluablock"},{"include":"#comment"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}}}]},"numberLiteral":{"patterns":[{"match":"(?:[^\\S\\n\\r])*([0-9]+(\\.[0-9]+)?)(?:[^\\S\\n\\r])*","captures":{"1":{"name":"constant.numeric.ink"}}}]},"operator":{"patterns":[{"name":"keyword.operator.logical.ink","match":"(?x)\n  \\~     |\n  !(?!=) |\n  \u0026\u0026     |\n  \\|\\|"},{"name":"keyword.operator.assignment.ink","match":"(?x)\n  =(?!=)"},{"name":"keyword.operator.assignment.augmented.ink","match":"(?x)\n  %=  |\n  \u0026=  |\n  \\*= |\n  \\+= |\n  \\-= |\n  /="},{"name":"keyword.operator.relational.ink","match":"(?x)\n  \u003c=   |\n  \u003e=   |\n  \u003c    |\n  \u003e"},{"name":"keyword.operator.comparison.ink","match":"(?x)\n  ==   |\n  !="},{"name":"keyword.operator.arithmetic.ink","match":"(?x)\n  \\-\\- |\n  \\+\\+ |\n  /    |\n  %    |\n  \\*   |\n  \\+   |\n  (?\u003c!$)(?:[^\\S\\n\\r])*-(?:[^\\S\\n\\r])*(?!=)"},{"name":"keyword.operator.membership.ink","match":"(?x)\n  \\?  |\n  !\\? |\n  \\^"},{"name":"keyword.operator.word.ink","match":"(?x)\n  (?\u003c=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])not   (?=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])   |\n  (?\u003c=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])and   (?=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])   |\n  (?\u003c=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])or    (?=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])   |\n  (?\u003c=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])has   (?=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])   |\n  (?\u003c=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])hasnt (?=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])   |\n  (?\u003c=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])mod   (?=[^a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}])"}]},"parentheses":{"patterns":[{"name":"punctuation.section.parens.begin.ink","match":"\\("},{"name":"punctuation.section.parens.end.ink","match":"\\)"}]},"returnStatement":{"patterns":[{"begin":"(?:[^\\S\\n\\r])*(return)(?=\\s)","end":"(?=$)","patterns":[{"include":"#function"},{"include":"#divert"},{"include":"#languageLiteral"},{"include":"#stringLiteral"},{"include":"#expressionIdentifier"},{"include":"#expression"},{"include":"#numberLiteral"}],"beginCaptures":{"1":{"name":"keyword.control.ink"}}}]},"stitch":{"patterns":[{"begin":"^(?:[^\\S\\n\\r])*(=)","end":"(?=^)","patterns":[{"include":"#comment"},{"include":"#knotStitchDeclaration"}],"beginCaptures":{"1":{"name":"storage.knot.ink storage.type.ink"}}}]},"stringLiteral":{"patterns":[{"begin":"(?:[^\\S\\n\\r]*)(\\\")","end":"(\\\")(?:[^\\S\\n\\r]*)","patterns":[{"name":"constant.character.escape.ink","match":"\\\\."},{"name":"string.quoted.double.ink","match":"[^\\n\\r\\\"]+"}],"beginCaptures":{"1":{"name":"punctuation.definition.string.begin.ink"}},"endCaptures":{"1":{"name":"punctuation.definition.string.end.ink"}}}]},"substitution":{"patterns":[{"match":"(?\u003c=\\{)([^\\{\\}\\:\\|]+)(?=\\})","captures":{"1":{"name":"keyword.control.ink"}}}]},"tag":{"patterns":[{"name":"string.quoted.other.ink entity.tag.ink","begin":"(?\u003c!\\\\)(\\#)","end":"(?=$|\\#)","patterns":[{"include":"#comment"},{"include":"#tag"}],"beginCaptures":{"1":{"name":"punctuation.definition.comment.ink comment.line.ink entity.tag.begin.ink"}}}]},"tempDeclaration":{"patterns":[{"begin":"(?x)\n (?:(?\u003c=^)|(?\u003c=\\~))\n (?:[^\\S\\n\\r])*\n (temp)\n (?:[^\\S\\n\\r])*\n ([a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*[a-zA-Z_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}][a-zA-Z0-9_\\x{0100}-\\x{017F}\\x{0180}-\\x{024F}\\x{0600}-\\x{06FF}\\x{0530}-\\x{058F}\\x{0400}-\\x{04FF}\\x{0370}-\\x{03FF}\\x{0590}-\\x{05FF}]*)\n (?:[^\\S\\n\\r])*\n (=)","end":"(?=$)","patterns":[{"include":"#comment"},{"include":"#function"},{"include":"#divert"},{"include":"#languageLiteral"},{"include":"#stringLiteral"},{"include":"#expressionIdentifier"},{"include":"#expression"},{"include":"#numberLiteral"}],"beginCaptures":{"1":{"name":"storage.modifier.ink"},"2":{"name":"entity.name.variable.other.ink"},"3":{"name":"keyword.assignment.ink"}}}]},"textSuppression":{"patterns":[{"begin":"(?\u003c!\\\\)(\\[)","end":"(?\u003c!\\\\)(\\])","patterns":[{"include":"#interpolevaluablock"}],"beginCaptures":{"1":{"name":"keyword.choice.suppression.ink keyword.control.ink"}},"endCaptures":{"1":{"name":"keyword.choice.suppression.ink keyword.control.ink"}}}]},"todo":{"patterns":[{"name":"comment.line.ink entity.todo.ink","begin":"(?\u003c=^|\\-)(?:[^\\S\\n\\r])*(TODO)","end":"(?=$)","patterns":[{"include":"#comment"}],"beginCaptures":{"1":{"name":"constant.other entity.todo.begin.ink"}}}]},"tunnel":{"patterns":[{"begin":"(?:[^\\S\\n\\r])*(-\u003e(?:-\u003e)?|\u003c-)(?:[^\\S\\n\\r])*","end":"(?=($|\\}|\\)|\\|))","patterns":[{"include":"#comment"},{"include":"#function"},{"include":"#divertIdentifier"}],"beginCaptures":{"1":{"name":"keyword.divert.ink keyword.other.ink"}}}]}}}
