{"scopeName":"source.overpassql","patterns":[{"include":"#TOP"}],"repository":{"TOP":{"patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#start-statement-context"}]},"assign-variable":{"name":"meta.overpassql.output-set","match":"(-\u003e)\\s*+(\\.)\\s*+([_a-zA-Z][_a-zA-Z0-9]*+)(?=\\s*+(?:;|$))","captures":{"1":{"name":"keyword.operator.assignment.overpassql"},"2":{"name":"punctuation.definition.variable.overpassql"},"3":{"name":"variable.other.overpassql"}}},"bareword":{"name":"meta.overpassql.bareword","match":"[a-zA-Z][a-zA-Z0-9]*+"},"block-comment":{"name":"comment.block.overpassql","begin":"\\/\\*","end":"\\*\\/","beginCaptures":{"0":{"name":"punctuation.definition.comment.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.definition.comment.end.overpassql"}}},"block-construct":{"name":"meta.overpassql.statement.block","begin":"if|else|foreach|for|complete|retro|compare","end":"(?\u003c=[;)}])","patterns":[{"include":"#whitespace"},{"include":"#comment"},{"include":"#parens-evaluator"},{"include":"#block-group"}],"beginCaptures":{"0":{"name":"keyword.control.overpassql"}}},"block-group":{"name":"meta.block.overpassql","begin":"\\{","end":"\\}","patterns":[{"include":"#whitespace"},{"include":"#comment"},{"include":"#start-statement-context"}],"beginCaptures":{"0":{"name":"punctuation.section.block.begin.overpassql punctuation.section.braces.begin"}},"endCaptures":{"0":{"name":"punctuation.section.block.end.overpassql punctuation.section.end.begin"}}},"builtin-evaluator-function-name":{"name":"meta.overpassql.evaluator.function-name","match":"(\\.)?+(id|type|is_tag|keys|version|timestamp|changeset|uid|user|count_tags|count_members|count_distinct_members|count_by_role|count_distinct_by_role|per_member|per_vertex|pos|mtype|ref|role|angle|is_closed|geom|length|lat|lon|lstr|poly|u|set|min|max|sum|count|gcat|number|is_number|suffix|abs|date|is_date|center|tracehull|lrs_in|lrs_isect|lrs_union|lrs_min|lrs_max)(?=\\()","captures":{"1":{"name":"punctuation.accessor.overpassql"},"2":{"name":"support.function.overpassql"}}},"comments":{"patterns":[{"include":"#block-comment"},{"include":"#line-comment"}]},"evaluator":{"patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#extended-overpass-turbo-queries"},{"include":"#evaluator-operator"},{"include":"#string-literal"},{"include":"#number-literal"},{"include":"#evaluator-variable"},{"include":"#evaluator-tag-value"},{"include":"#evaluator-field-access"},{"include":"#builtin-evaluator-function-name"},{"include":"#evaluator-function-name"},{"include":"#evaluator-function-params"}]},"evaluator-field-access":{"name":"meta.overpassql.evaluator.field-access","match":"(\\.)([a-zA-Z][a-zA-Z0-9]*+)(?!\\()","captures":{"1":{"name":"punctuation.accessor.overpassql"},"2":{"name":"variable.other.member.overpassql"}}},"evaluator-function-name":{"name":"meta.overpassql.evaluator.function-name","match":"(\\.)?+([a-zA-Z][a-zA-Z0-9]*+)(?=\\()","captures":{"1":{"name":"punctuation.accessor.overpassql"},"2":{"name":"variable.function.overpassql"}}},"evaluator-function-params":{"name":"meta.group.overpassql meta.parens.overpassql meta.overpassql.function.params","begin":"\\(","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#parameter-separator"},{"include":"#evaluator"}],"beginCaptures":{"0":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"evaluator-operator":{"match":"(::)|(!|\\|\\||\u0026\u0026|==|!=|\u003c=|\u003e=|\u003c|\u003e)|(\\+|-|\\*|/)|(\\?|:)","captures":{"1":{"name":"keyword.other.overpassql"},"2":{"name":"keyword.operator.logical.overpassql"},"3":{"name":"keyword.operator.arithmetic.overpassql"},"4":{"name":"keyword.operator.other.overpassql"}}},"evaluator-tag-value":{"name":"meta.overpassql.evaluator.tag-value","begin":"\\[","end":"\\]","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#string-literal"},{"include":"#bareword"},{"include":"#evaluator"}],"beginCaptures":{"0":{"name":"punctuation.section.brackets.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.brackets.end.overpassql"}}},"evaluator-variable":{"name":"variable.other.overpassql","match":"([a-zA-Z][a-zA-Z0-9]*+)(?=\\.)"},"expression":{"patterns":[{"include":"#extended-overpass-turbo-queries"},{"include":"#pair-expression"},{"include":"#number-literal"},{"include":"#string-literal"},{"include":"#setting-special-fields"},{"include":"#tag-expression"},{"include":"#query-type"},{"include":"#parens-expression"}]},"extended-overpass-turbo-queries":{"name":"meta.overpassql.turbo.query","begin":"{{","end":"}}","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#number-literal"},{"include":"#string-literal"},{"include":"#overpass-turbo-query-name"},{"include":"#overpass-turbo-query-separator"},{"include":"#overpass-turbo-query-definition"},{"include":"#overpass-turbo-custom-query-name"}],"beginCaptures":{"0":{"name":"keyword.other.overpassql.turbo.begin"}},"endCaptures":{"0":{"name":"keyword.other.overpassql.turbo.end"}}},"fallback":{"name":"meta.overpassql.unknown","begin":"(?=.)","end":"(?\u003c=[;\\{|\\}])","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#number-literal"},{"include":"#string-literal"},{"include":"#query-type"},{"include":"#assign-variable"},{"include":"#input-set"}]},"function-call":{"name":"meta.function-call.overpassql","begin":"(is_in|timeline)(\\()","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#expression"},{"include":"#parameter-separator"}],"beginCaptures":{"1":{"name":"support.function.overpassql"},"2":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"function-call-names":{"name":"support.function.overpassql","match":"is_in|timeline"},"function-call-statement-function-name":{"name":"meta.overpassql.statement.function-call","begin":"(?=(?:\\.\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+[a-zA-Z][a-zA-Z0-9]*+\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+)?+(?:is_in|timeline))","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#input-set"},{"include":"#function-call"},{"include":"#assign-variable"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"function-word-statement-word-function-name":{"name":"meta.overpassql.statement.word-function","begin":"(?=(?:\\.\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+[a-zA-Z][a-zA-Z0-9]*+\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+)?+(?:local|convert|make))","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#input-set"},{"include":"#word-function-names"},{"include":"#word-function-param"},{"include":"#assign-variable"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"generic-function-call":{"name":"meta.function-call.overpassql.generic","begin":"(\\w++)(\\()","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#expression"},{"include":"#parameter-separator"}],"beginCaptures":{"1":{"name":"variable.function.overpassql"},"2":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"generic-function-statement-generic-name":{"name":"meta.overpassql.statement.generic-function","begin":"(?=(?:\\.\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+[a-zA-Z][a-zA-Z0-9]*+\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+)?+\\w)","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#input-set"},{"include":"#generic-function-call"},{"include":"#assign-variable"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"input-set":{"match":"(\\.)\\s*+([_a-zA-Z][_a-zA-Z0-9]*+)","captures":{"1":{"name":"punctuation.definition.variable.overpassql"},"2":{"name":"variable.other.overpassql"}}},"item-statement-dot-semicolon":{"name":"meta.overpassql.statement.item","begin":"(?=\\.\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+[a-zA-Z][a-zA-Z0-9]*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+;)","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#input-set"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"line-comment":{"name":"comment.double-slash.overpassql","match":"(//).*+$","captures":{"1":{"name":"punctuation.definition.comment.begin.overpassql"}}},"number-literal":{"match":"(?\u003c!\\w)(-)?+((?:[1-9][0-9]*+|0)(?:\\.[0-9]++)?+)(?!\\w)","captures":{"1":{"name":"keyword.operator.arithmetic.overpassql"},"2":{"name":"constant.numeric.overpassql"}}},"operator-names":{"name":"keyword.operator.other.overpassql","match":"\u003c\u003c|\u003e\u003e|\u003c|\u003e"},"operator-statement-operator-symbol":{"name":"meta.overpassql.statement.operator","begin":"(?=(?:\\.\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+[a-zA-Z][a-zA-Z0-9]*+\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+)?+(?:\u003c\u003c|\u003e\u003e|\u003c|\u003e))","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#input-set"},{"include":"#operator-names"},{"include":"#assign-variable"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"out-keyword":{"name":"keyword.other.overpassql","match":"out\\b"},"out-parameter":{"patterns":[{"include":"#out-parameter-keyword"},{"include":"#positive-integer"},{"include":"#parens-expression"}]},"out-parameter-keyword":{"match":"count|ids|skel|body|tags|meta|noids|geom|center|bb|asc|qt","captures":{"0":{"name":"support.constant.overpassql.out"}}},"out-statement-keyword":{"name":"meta.overpassql.statement.out","begin":"(?=(?:\\.\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+[a-zA-Z][a-zA-Z0-9]*+\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+)?+out)","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#input-set"},{"include":"#out-keyword"},{"include":"#out-parameter"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"overpass-turbo-custom-query-name":{"name":"variable.other.overpassql.turbo","match":"\\b[a-zA-Z][a-zA-Z0-9]*+(?=\\w*[:}=])"},"overpass-turbo-query-definition":{"name":"keyword.operator.assignment.overpassql.turbo","match":"="},"overpass-turbo-query-name":{"name":"support.constant.overpassql.turbo","match":"\\b(bbox|center|date|geocodeId|geocodeArea|geocodeBbox|geocodeCoords|style|data)\\b"},"overpass-turbo-query-separator":{"name":"punctuation.separator.delimiter.colon.overpassql.turbo","match":":"},"pair-expression":{"name":"meta.overpassql.pair","begin":"([a-zA-Z][a-zA-Z0-9]*+)(\\()","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#parameter-separator"},{"include":"#expression"},{"include":"#skip-term"}],"beginCaptures":{"1":{"name":"entity.other.overpassql"},"2":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"parameter-separator":{"name":"punctuation.separator.delimiter.comma.overpassql","match":","},"parens-evaluator":{"name":"meta.overpassql.evaluator-group","begin":"\\(","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comment"},{"include":"#evaluator"}],"beginCaptures":{"0":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"parens-expression":{"begin":"\\(","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#expression"},{"include":"#parameter-separator"}],"beginCaptures":{"0":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"positive-integer":{"match":"(?\u003c!\\w)([1-9][0-9]*+|0)(?!\\w)","captures":{"0":{"name":"constant.numeric.overpassql"}}},"q-string":{"name":"string.quoted.single.overpassql meta.string.overpassql","begin":"'","end":"'","patterns":[{"include":"#string-escape"}],"beginCaptures":{"0":{"name":"punctuation.definition.string.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.definition.string.end.overpassql"}}},"qq-string":{"name":"string.quoted.double.overpassql meta.string.overpassql","begin":"\"","end":"\"","patterns":[{"include":"#string-escape"}],"beginCaptures":{"0":{"name":"punctuation.definition.string.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.definition.string.end.overpassql"}}},"query-filter":{"patterns":[{"include":"#query-filter-haskv"},{"include":"#query-filter-intersect"},{"include":"#query-filter-paren"}]},"query-filter-haskv":{"name":"meta.overpassql.query.filter.kv","begin":"\\[","end":"\\]","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#query-filter-haskv-operators"},{"include":"#query-filter-haskv-insensitive"},{"include":"#string-literal"},{"include":"#bareword"}],"beginCaptures":{"0":{"name":"punctuation.definition.brackets.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.definition.brackets.end.overpassql"}}},"query-filter-haskv-insensitive":{"name":"keyword.operator.logical.overpassql","match":"(,)\\s*+(i)\\s*+(?=\\])","captures":{"1":{"name":"punctuation.separator.delimiter.comma.overpassql"},"2":{"name":"support.constant.overpassql.i"}}},"query-filter-haskv-operators":{"name":"keyword.operator.logical.overpassql","match":"=|!=|~|!~|!"},"query-filter-intersect":{"name":"meta.overpassql.query.filter.intersect","match":"(\\.)\\s*+([_a-zA-Z][_a-zA-Z0-9]*+)","captures":{"1":{"name":"keyword.operator.arithmetic.overpassql.intersect"},"2":{"name":"variable.other.overpassql"}}},"query-filter-keywords":{"name":"keyword.other.overpassql meta.overpassql.query.filter.parens.keyword","match":"\\b(n|w|r|bn|bw|br|id|around|poly|newer|changed|user|uid|area|pivot|if)\\b"},"query-filter-paren":{"name":"meta.group.overpassql meta.parens.overpassql meta.overpassql.query.filter.parens","begin":"\\(","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#query-filter-keywords"},{"include":"#evaluator"},{"include":"#query-filter-separator"},{"include":"#parameter-separator"},{"include":"#expression"}],"beginCaptures":{"0":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"query-filter-separator":{"name":"punctuation.separator.delimiter.colon.overpassql","match":":"},"query-statement-query-type":{"name":"meta.overpassql.statement.query","begin":"(?=(?:node|way|relation|rel|derived|area|nwr)\\b)","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#query-type"},{"include":"#query-filter"},{"include":"#assign-variable"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"query-type":{"name":"keyword.other.query.overpassql","match":"\\b(node|way|relation|rel|derived|area|nwr)\\b"},"set-difference-operator":{"name":"keyword.operator.logical.overpassql","match":"-"},"setting-bracket-colon":{"name":"meta.overpassql.setting","begin":"(\\[)(?=\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+\\w++\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+:)","end":"\\]","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#setting-name"},{"include":"#setting-param"},{"include":"#setting-separator"},{"include":"#parameter-separator"}],"beginCaptures":{"0":{"name":"punctuation.definition.brackets.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.definition.brackets.end.overpassql"}}},"setting-name":{"name":"keyword.other.setting","match":"\\b(timeout|maxsize|out|bbox|date|diff|adiff)\\b"},"setting-param":{"patterns":[{"include":"#setting-special-fields"},{"include":"#parameter-separator"},{"include":"#expression"}]},"setting-separator":{"name":"punctuation.separator.delimiter.colon.overpassql","match":":"},"setting-special-fields":{"name":"meta.overpassql.setting.special-field","match":"(::)(id|type|otype|lat|lon|version|timestamp|changeset|uid|user)\\b|(::)(count)(?:(:)(nodes|ways|relations|areas))?+\\b","captures":{"1":{"name":"punctuation.accessor.overpassql"},"2":{"name":"support.constant.overpassql"},"3":{"name":"punctuation.accessor.overpassql"},"4":{"name":"support.constant.overpassql"},"5":{"name":"punctuation.accessor.overpassql"},"6":{"name":"support.constant.overpassql"}}},"settings-statement-bracket-colon":{"name":"meta.overpassql.statement.settings-declaration","begin":"(?=\\[\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+\\w++\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+:)","end":";","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#setting-bracket-colon"}],"endCaptures":{"0":{"name":"punctuation.terminator.statement.overpassql"}}},"skip-term":{"name":"meta.overpassql.term","match":"[a-zA-Z][a-zA-Z0-9]*+"},"start-statement-context":{"name":"meta.context.overpassql.statement","begin":"(?=.)","end":"(?\u003c=;)","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#extended-overpass-turbo-queries"},{"include":"#settings-statement-bracket-colon"},{"include":"#query-statement-query-type"},{"include":"#out-statement-keyword"},{"include":"#item-statement-dot-semicolon"},{"include":"#operator-statement-operator-symbol"},{"include":"#function-call-statement-function-name"},{"include":"#function-word-statement-word-function-name"},{"include":"#statement-grouping"},{"include":"#block-construct"},{"include":"#generic-function-statement-generic-name"},{"include":"#block-group"},{"include":"#fallback"}]},"statement-grouping":{"name":"meta.overpassql.group","begin":"\\(","end":"\\)","patterns":[{"include":"#whitespace"},{"include":"#comment"},{"include":"#set-difference-operator"},{"include":"#start-statement-context"}],"beginCaptures":{"0":{"name":"punctuation.section.group.begin.overpassql punctuation.section.parens.begin.overpassql"}},"endCaptures":{"0":{"name":"punctuation.section.group.end.overpassql punctuation.section.parens.end.overpassql"}}},"string-escape":{"name":"constant.character.escape.overpassql","match":"\\\\[nt\"'\\\\]|\\\\u[0-9a-fA-F]{4}"},"string-literal":{"patterns":[{"include":"#qq-string"},{"include":"#q-string"}]},"tag-correspondance":{"name":"keyword.operator.assignment.overpassql","match":"="},"tag-expression":{"name":"meta.overpassql.tag-access","begin":"(::)(?=\\s*+(?:/\\*(?:[^*]|\\*[^/])*+\\*/\\s*+)*+[\"'a-zA-Z])","end":"(?=[,)])","patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#string-literal"},{"include":"#bareword"}],"beginCaptures":{"0":{"name":"punctuation.accessor.overpassql"}}},"tag-keywords":{"name":"meta.overpassql.tag-match.keyword","match":"(::)(id)?+","captures":{"1":{"name":"keyword.other.overpassql.key"},"2":{"name":"keyword.other.overpassql.id"}}},"tag-match":{"patterns":[{"include":"#whitespace"},{"include":"#comments"},{"include":"#tag-operators"},{"include":"#tag-correspondance"},{"include":"#tag-keywords"},{"include":"#evaluator"},{"include":"#string-literal"},{"include":"#bareword"}]},"tag-operators":{"name":"keyword.operator.overpassql","match":"!"},"whitespace":{"name":"meta.overpassql.whitespace","match":"[ \\t]++"},"word-function-names":{"name":"support.function.overpassql","match":"local|convert|make"},"word-function-param":{"patterns":[{"include":"#query-type"},{"include":"#tag-match"},{"include":"#parameter-separator"}]}}}
