{"name":"koka","scopeName":"source.koka","patterns":[{"include":"#line_comment"},{"include":"#line_directive"},{"include":"#block_comment"},{"include":"#string"},{"include":"#rawstring"},{"include":"#rawstring1"},{"include":"#rawstring2"},{"include":"#character"},{"include":"#characteresc"},{"include":"#type_app"},{"include":"#top_type"},{"include":"#top_type_type"},{"include":"#top_type_alias"},{"include":"#top_type_struct_args"},{"include":"#top_type_struct"},{"include":"#top_type_quantifier"},{"include":"#decl_function"},{"include":"#decl_external_import"},{"include":"#decl_external"},{"include":"#decl_toplevel_val"},{"include":"#decl_val"},{"include":"#decl_var"},{"include":"#decl_hover_expr"},{"include":"#decl_hover_implicit"},{"include":"#decl_param"},{"include":"#module_id"},{"include":"#import_id"},{"include":"#import_id2"},{"include":"#branch"},{"include":"#dot"},{"include":"#reservedid"},{"include":"#reservedcontrol"},{"include":"#reservedop"},{"include":"#libraryid"},{"include":"#externid"},{"include":"#qconstructor"},{"include":"#qoperator"},{"include":"#qidentifier"},{"include":"#identifier"},{"include":"#constructor"},{"include":"#special"},{"include":"#minus"},{"include":"#operator"},{"include":"#wildcard"},{"include":"#number"},{"include":"#inv_character"},{"include":"#whitespace"}],"repository":{"block_comment":{"name":"comment.block koka.comment.block","begin":"/\\*","end":"\\*/","patterns":[{"include":"#block_comment"},{"name":"koka.comment.doc.pre.block","begin":"^```+.*$","end":"^```+\\s*$"},{"match":"`(:[^\\`\\n]+)`","captures":{"1":{"name":"koka.comment.doc.pre.type"}}},{"match":"`(module [^\\`\\n]+)`","captures":{"1":{"name":"koka.comment.doc.pre.module"}}},{"match":"`+([^\\`\\n]*)`+","captures":{"1":{"name":"koka.comment.doc.pre.source"}}},{"match":"\\*([^\\*]*)\\*","captures":{"1":{"name":"koka.comment.doc.emph"}}},{"match":"_([^_]*)_","captures":{"1":{"name":"markup.italic koka.comment.doc.emph"}}}],"beginCaptures":{"0":{"name":"punctuation.definition.comment koka.comment.block"}},"endCaptures":{"0":{"name":"punctuation.definition.comment koka.comment.block"}}},"branch":{"name":"keyword.other koka.id.library.$1","match":"(finally|initially)\\s*(?=-\u003e|[\\{\\(])"},"character":{"name":"string.quoted.single koka.char","match":"'[^\\'\\\\$]'","beginCaptures":{"0":{"name":"punctuation.definition.character koka.char"}},"endCaptures":{"0":{"name":"punctuation.definition.character koka.char"}}},"characteresc":{"match":"(')(\\\\([abfnrtv0\\\\\"'\\?]|x[\\da-fA-F]{2}|u[\\da-fA-F]{4}|U[\\da-fA-F]{6}))(')","captures":{"1":{"name":"string.quoted.single koka.char"},"2":{"name":"string.quoted.single constant.character.escape koka.char.escape"},"3":{"name":"string.quoted.single constant.character.escape koka.char.escape"},"4":{"name":"string.quoted.single koka.char"}}},"constructor":{"name":"entity.name.tag.css.constant.other.constructor koka.conid","match":"[@A-Z][\\w\\-@]*[\\']*"},"decl_external":{"match":"((?:(?:inline|noinline)\\s+)?(?:(?:fip|fbip)\\s+)?extern)\\s+((?:[@a-z][\\w\\-@]*/#?)*)([@a-z][\\w\\-@]*[\\']*|\\([$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+\\)|\\[\\]|\\\"[^\\s\\\"]+\\\")?","captures":{"1":{"name":"keyword.declaration.function koka.keyword.extern"},"2":{"name":"entity.name.variable koka.moduleid"},"3":{"name":"entity.name.function koka.id.decl.function"}}},"decl_external_import":{"name":"keyword.declaration.import koka.keyword.extern","match":"(extern\\s+import)"},"decl_function":{"match":"((?:(?:inline|noinline)\\s+)?(?:tail\\s+)?(?:(?:fip|fbip)(?:\\(\\d+\\))?\\s+)?(?:fun|fn|ctl|ret))\\s+((?:[@a-z][\\w\\-@]*/#?)*)([@a-z][\\w\\-@]*[\\']*|\\([$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+\\)|\\[\\]|\\\"[^\\s\\\"]+\\\")","captures":{"1":{"name":"keyword.declaration.function koka.keyword.fun"},"2":{"name":"entity.name.variable koka.moduleid"},"3":{"name":"entity.name.function koka.id.decl.function"}}},"decl_hover_expr":{"name":"keyword.declaration koka.keyword.expr","match":"^expr"},"decl_hover_implicit":{"match":"(\\?(?:[@a-z][\\w\\-@]*/#?)*)([@a-z][\\w\\-@]*[\\']*|\\([$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+\\))(?=\\s*[=])","captures":{"1":{"name":"entity.name.label source.typeparam koka.param.implicit"},"2":{"name":"entity.name.label source.typeparam koka.param.implicit"}}},"decl_param":{"name":"entity.name koka.id.param","match":"([a-z][\\w\\-]*[\\']*)\\s*(?=:)"},"decl_toplevel_val":{"match":"(^(?:(?:inline|noinline)\\s+)?val)\\s+((?:[@a-z][\\w\\-@]*/#?)*)([@a-z][\\w\\-@]*[\\']*|\\([$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+\\))?","captures":{"1":{"name":"keyword.declaration  koka.keyword.val"},"2":{"name":"entity.name.variable koka.moduleid"},"3":{"name":"entity.name.function koka.id.decl.val"}}},"decl_val":{"match":"((?:(?:inline|noinline)\\s+)?val)\\s+((?:[@a-z][\\w\\-@]*/#?)*)([@a-z][\\w\\-@]*[\\']*|\\([$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+\\))?","captures":{"1":{"name":"keyword.declaration  koka.keyword.val"},"2":{"name":"entity.name.variable koka.moduleid"},"3":{"name":"entity.name koka.id.decl.val"}}},"decl_var":{"match":"(var)\\s+([a-z][\\w\\-]*[\\']*|\\([$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+\\))","captures":{"1":{"name":"keyword.declaration koka.keyword.var"},"2":{"name":"entity.name koka.id.decl.var"}}},"dot":{"name":"source.dot koka.special.dot","match":"\\."},"externid":{"name":"keyword.control koka.id.extern.$1","match":"(?:c|cs|js|inline)\\s+(?:inline\\s+)?(?:(?:file|header-file|header-end-file)\\s+)?(?=[\\\"\\{]|r#*\")"},"identifier":{"name":"source koka.id","match":"@?[a-z][\\w\\-@]*[\\']*"},"import_id":{"match":"(import)(\\s+(([a-z][\\w\\-]*/)*[a-z][\\w\\-]*)(\\s+(=)(\\s+(([a-z][\\w\\-]*/)*[a-z][\\w\\-]*))?))","captures":{"1":{"name":"keyword koka.keyword.import"},"3":{"name":"entity.name.variable koka.moduleid"},"6":{"name":"keyword koka.keyword.op"},"8":{"name":"entity.name.variable koka.moduleid"}}},"import_id2":{"match":"(import)(\\s+(([a-z][\\w\\-]*/)*[a-z][\\w\\-]*))","captures":{"1":{"name":"keyword koka.keyword.import"},"3":{"name":"entity.name.variable koka.moduleid"}}},"inv_character":{"name":"invalid.string.quoted.single koka.char.invalid","match":"'([^'\\\\\\n]|\\\\(.|x..|u....|U......))'|'$|''?"},"libraryid":{"name":"keyword.control koka.id.library.$1","match":"(resume|resume-shallow|rcontext)(?![\\w\\-?'])"},"libraryop":{"name":"keyword.control koka.op.library","match":"(!)(?![$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e])"},"line_comment":{"name":"comment.line.double-slash koka.comment.line","begin":"//","end":"$","patterns":[{"match":"`(:[^\\`\\n]+)`","captures":{"1":{"name":"koka.comment.doc.pre.type"}}},{"match":"`(module [^\\`\\n]+)`","captures":{"1":{"name":"koka.comment.doc.pre.module"}}},{"match":"`+([^\\`\\n]*)`+","captures":{"1":{"name":"koka.comment.doc.pre.source"}}},{"match":"\\*([^\\*]*)\\*","captures":{"1":{"name":"koka.comment.doc.emph"}}},{"match":"_([^_]*)_","captures":{"1":{"name":"markup.italic koka.comment.doc.emph"}}}],"beginCaptures":{"0":{"name":"punctuation.definition.comment  koka.comment.line"}}},"line_directive":{"name":"meta.preprocessor koka.preprocessor","match":"^\\s*#.*$"},"minus":{"name":"source.operator.minus koka.op.minus","match":"-(?![$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e])"},"module_id":{"match":"(module)\\s*((interface)?)\\s*(([a-z][\\w\\-]*/)*[a-z][\\w\\-]*)","captures":{"1":{"name":"keyword.other koka.keyword.module"},"3":{"name":"keyword.other koka.keyword.interface"},"4":{"name":"entity.name.variable koka.moduleid"}}},"number":{"name":"constant.numeric koka.number","match":"-?(?:0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*(\\.[\\da-fA-F]+(?:_[\\da-fA-F]+)*)?([pP][\\-+]?\\d+)?|0[bB][01][01_]*|(?:0|[1-9]\\d*)(?:_\\d+)*(\\.\\d+(?:_\\d+)*([eE][\\-+]?\\d+)?)?)"},"operator":{"name":"source.operator koka.op","match":"[$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+"},"param_identifier":{"match":"([^]\\s+)?(\\?[\\?]?\\s*)?([@a-z][\\w\\-@]*[\\']*)\\s*(?=[:,\\)])","captures":{"1":{"name":"koka.keyword.borrow"},"2":{"name":"koka.keyword.implicit"},"3":{"name":"source koka.id.param"}}},"qconstructor":{"match":"((?:[@a-z][\\w\\-@]*/#?)+)(@?[A-Z][\\w\\-@]*[\\']*)","captures":{"1":{"name":"entity.name.variable koka.moduleid"},"2":{"name":"entity.name.tag.css.constant.other.constructor koka.conid"}}},"qidentifier":{"match":"([\\?]?(?:[@a-z][\\w\\-@]*/#?)+)(@?[a-z][\\w\\-@]*[\\']*)","captures":{"1":{"name":"entity.name.variable koka.moduleid"},"2":{"name":"source koka.id"}}},"qoperator":{"match":"([\\?]?(?:[@a-z][\\w\\-@]*/#?)+)(\\([^\\n\\r\\)]+\\))","captures":{"1":{"name":"entity.name.variable koka.moduleid"},"2":{"name":"source.operator koka.op"}}},"rawstring":{"name":"string.quoted.double koka.string.raw","begin":"r\"","end":"\"","patterns":[{"name":"string.quoted.double koka.string.raw","match":"[^\"]+"},{"name":"invalid.string.quoted.double koka.string.raw","match":"."}],"beginCaptures":{"0":{"name":"punctuation.definition.string koka.string"}},"endCaptures":{"0":{"name":"punctuation.definition.string koka.string"}}},"rawstring1":{"name":"string.quoted.double koka.string.raw","begin":"r#\"","end":"\"#","patterns":[{"name":"string.quoted.double koka.string.raw","match":"[^\"]+"},{"name":"string.quoted.double koka.string.raw","match":"\"(?!#)"},{"name":"invalid.string.quoted.double koka.string.raw","match":"."}],"beginCaptures":{"0":{"name":"punctuation.definition.string koka.string"}},"endCaptures":{"0":{"name":"punctuation.definition.string koka.string"}}},"rawstring2":{"name":"string.quoted.double koka.string.raw","begin":"r##\"","end":"\"##","patterns":[{"name":"string.quoted.double koka.string.raw","match":"[^\"]+"},{"name":"string.quoted.double koka.string.raw","match":"\"(?!##)"},{"name":"invalid.string.quoted.double koka.string.raw","match":"."}],"beginCaptures":{"0":{"name":"punctuation.definition.string koka.string"}},"endCaptures":{"0":{"name":"punctuation.definition.string koka.string"}}},"reservedcontrol":{"name":"keyword.control koka.keyword.control.$1","match":"(if|then|else|elif|match|return)(?![\\w\\-'])"},"reservedid":{"name":"keyword.other koka.keyword","match":"(return(?=(?:\\(|\\s+\\(?)\\w[\\w\\-]*\\s*(?:\\)\\s*(?:[^;])))|infix|infixr|infixl|type|co|lazy(?:\\s+tail)?(?:\\s+(?:fip|fbip)(?:\\(\\d+\\))?)?|rec|struct|alias|forall|exists|some|extern|fun|fn|val|var|con|with(?:\\s+override)?|module|import|as|in|ctx|hole|pub|abstract|effect|named|(?:raw\\s+|final\\s+)ctl|break|continue|unsafe|mask(?:\\s+behind)?|handle|handler)(?![\\w\\-'])"},"reservedop":{"name":"keyword koka.keyword.op","match":"(=|=\u003e|\\-\u003e|\u003c\\-|\\||\\.|:|:=)(?![$%\u0026\\*\\+!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e])"},"special":{"name":"punctuation.separator koka.special","match":"[{}\\(\\)\\[\\];,]"},"string":{"name":"string.quoted.double koka.string","begin":"\"","end":"\"|$","patterns":[{"name":"invalid.string.quoted.double koka.string.invalid","match":"([^\"\\\\]|\\\\.)+$"},{"name":"string.quoted.double.regular koka.string","match":"[^\"\\\\]+"},{"name":"string.quoted.double constant.character.escape koka.string.escape","match":"\\\\([abfnrtvz0\\\\\"'\\?]|x[\\da-fA-F]{2}|u[\\da-fA-F]{4}|U[\\da-fA-F]{6})"},{"name":"invalid.string.quoted.double koka.string","match":"."}],"beginCaptures":{"0":{"name":"punctuation.definition.string koka.string"}},"endCaptures":{"0":{"name":"punctuation.definition.string koka.string"}}},"top_type":{"begin":"(:(?![$%\u0026\\*\\+@!\\\\\\^~=\\.:\\-\\|\u003c\u003e]))|(where|iff|when)(?![\\w\\-])","end":"(?=[,\\)\\{\\}\\[\\]=;\"`A-Z]|  |(infix|infixr|infixl|inline|noinline|fip|fbip|tail|value|reference|open|extend|rec|co|lazy|type|linear|effect|ambient|alias|extern|fn|fun|function|val|raw|final|ctl|var|con|if|then|else|elif|match|inject|mask|named|handle|handler|return|module|import|as|pub|abstract)(?![\\w\\-?']))","patterns":[{"include":"#type_content_top"}],"beginCaptures":{"1":{"name":"constant.numeric.type support.type koka.type"},"2":{"name":"keyword koka.keyword.$2"}},"endCaptures":{"0":{"name":"invalid.keyword koka.invalid"}}},"top_type_alias":{"begin":"(alias)\\s+([a-z][\\w\\-]+)","end":"(?=[,\\)\\{\\}\\[\\];\"`A-Z]|(infix|infixr|infixl|inline|noinline|fip|fbip|tail|type|co|lazy|rec|linear|alias|effect|ambient|extern|fn|fun|function|val|var|con|if|then|else|elif|match|inject|mask|named|handle|handler|return|module|import|as|pub|abstract)(?![\\w\\-?']))","patterns":[{"name":"keyword.other koka.keyword.op","match":"="},{"include":"#type_content_top"}],"beginCaptures":{"1":{"name":"keyword.declaration koka.keyword"},"2":{"name":"constant.numeric.type support.type koka.type.typecon"}},"endCaptures":{"0":{"name":"invalid.keyword koka.keyword.invalid"}}},"top_type_quantifier":{"begin":"(exists|forall|some)(\\s*)(\u003c)","end":"(\u003e)|(?=[\\)\\{\\}\\[\\]=;\"`]|(infix|infixr|infixl|inline|noinline|fip|fbip|tail|type|co|lazy|rec|effect|ambient|alias|extern|fn|fun|function|val|var|if|then|else|elif|match|inject|mask|named|handle|handler|return|module|import|as|pub|abstract)(?![\\w\\-?']))","patterns":[{"include":"#type_content"}],"beginCaptures":{"1":{"name":"keyword koka.keyword"},"3":{"name":"constant.numeric.type support.type koka.type.special"}},"endCaptures":{"1":{"name":"constant.numeric.type support.type koka.type.special"},"2":{"name":"invalid.keyword koka.keyword.invalid"}}},"top_type_struct":{"match":"((?:(?:value|ref)\\s*)?struct)\\s+((?:[@a-z][\\w\\-@]*/#?)*)(@?[a-z][\\w\\-@]*[\\']*)","captures":{"1":{"name":"keyword.declaration koka.keyword.struct"},"2":{"name":"entity.name.variable koka.moduleid"},"3":{"name":"constant.numeric.type support.type koka.type.typecon"}}},"top_type_struct_args":{"begin":"((?:(?:value|ref)\\s*)?struct)\\s+([a-z][\\w\\-]*|\\(,*\\))\\s*(\u003c)","end":"(\u003e)|(?=[\\)\\{\\}\\[\\]=;\"`]|(infix|infixr|infixl|inline|noinline|fip|fbip|tail|type|co|lazy|rec|effect|ambient|alias|extern|fn|fun|function|val|var|if|then|else|elif|match|inject|mask|named|handle|handler|return|module|import|as|pub|abstract)(?![\\w\\-?']))","patterns":[{"include":"#type_content"}],"beginCaptures":{"1":{"name":"keyword.declaration koka.keyword.struct"},"2":{"name":"constant.numeric.type support.type koka.type.typecon"},"3":{"name":"constant.numeric.type support.type koka.type.special"}},"endCaptures":{"1":{"name":"constant.numeric.type support.type koka.type.special"},"2":{"name":"invalid.keyword koka.keyword.invalid"}}},"top_type_type":{"begin":"((?:(?:value|reference|open|extend|rec|co|lazy(?:\\s+tail)?(?:\\s+(?:fip|fbip)(?:\\(\\d+\\))?)?)?\\s*type)|(?:named\\s+)?(?:scoped\\s+)?(?:linear\\s+)?(?:rec\\s+)?(?:effect|ambient))\\s+(?!fn|fun|val|raw|final|ctl|ret)((?:[@a-z][\\w\\-@]*/#?)*)(@?[a-z][\\w\\-@]*[\\']*)","end":"(?=[\\)\\{\\}\\[\\]=;\"`A-Z]|  [\\r\\n]|(infix|infixr|infixl|inline|noinline|fip|fbip|tail|type|co|lazy|rec|effect|ambient|alias|extern|fn|fun|function|val|var|raw|final|ctl|con|if|then|else|elif|match|inject|mask|named|handle|handler|return|module|import|as|pub|abstract|value|reference|open|extend)(?![\\w\\-?']))","patterns":[{"include":"#type_content_top"}],"beginCaptures":{"1":{"name":"keyword.declaration.type koka.keyword"},"2":{"name":"entity.name.variable koka.moduleid"},"3":{"name":"constant.numeric.type support.type koka.type.typecon"}},"endCaptures":{"0":{"name":"punctuation.separator koka.special"}}},"type_app":{"name":"constant.numeric.type support.type koka.type.special","begin":"\u003c(?![%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\\s\\d])","end":"\u003e|\\n|  ","patterns":[{"include":"#type_content"}],"beginCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}},"endCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}}},"type_content":{"patterns":[{"include":"#type_implicit_parameter"},{"include":"#type_parameter"},{"include":"#type_content_top"}]},"type_content_top":{"patterns":[{"name":"keyword.other koka.keyword.$1","match":"(forall|exists|some|with|in|iff|when|is|if)(?![\\w\\-])"},{"name":"constant.numeric.type support.type koka.type.special","match":"(\\-\u003e|::?|\\.)(?![$%\u0026\\*\\+@!\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e])"},{"include":"#type_qidentifier"},{"include":"#type_variable"},{"include":"#type_identifier"},{"include":"#type_kind"},{"name":"constant.numeric.type support.type koka.type.parens","begin":"\\(","end":"\\)","patterns":[{"include":"#type_content"}],"beginCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}},"endCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}}},{"name":"constant.numeric.type support.type koka.type.special","begin":"\u003c(?![%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|])","end":"\u003e|\\n|  ","patterns":[{"include":"#type_content"}],"beginCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}},"endCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}}},{"name":"constant.numeric.type support.type koka.type.special","begin":"\\[","end":"\\]","patterns":[{"include":"#type_content"}],"beginCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}},"endCaptures":{"0":{"name":"constant.numeric.type support.type koka.type.special"}}},{"include":"#line_comment"},{"include":"#block_comment"},{"name":"constant.numeric.type support.type koka.type.special","match":"[;,]|:"}]},"type_identifier":{"name":"constant.numeric.type support.type koka.type.typecon","match":"[\\$]?[@a-z][\\w\\-@]*[\\']*"},"type_implicit_parameter":{"match":"(\\?(?:[@a-z][\\w\\-@]*/#?)*)([@a-z][\\w\\-@]*[\\']*|\\([$%\u0026\\*\\+@!/\\\\\\^~=\\.:\\-\\?\\|\u003c\u003e]+\\))\\s*(?=:(?!:))","captures":{"1":{"name":"entity.name.label source.typeparam koka.type.typeparam.implicit"},"2":{"name":"entity.name.label source.typeparam koka.type.typeparam.implicit"}}},"type_kind":{"name":"constant.numeric.type support.type koka.type.kind","match":"[A-Z](?![\\w\\-])"},"type_parameter":{"match":"([\\^]\\s+)?((?:[\\?][\\?]?\\s*)?[@a-z][\\w\\-@]*[\\']*)\\s*(?=:(?!:))","captures":{"1":{"name":"keyword.other koka.keyword.borrow"},"2":{"name":"entity.name.label source.typeparam koka.type.typeparam"}}},"type_qidentifier":{"name":"entity.name.variable koka.moduleid","match":"([@a-z][\\w\\-@]*[\\']*/#?)+"},"type_variable":{"name":"markup.italic constant.numeric.type support.type koka.type.typevar","match":"([_]?[a-z][0-9]*|_[\\w\\-]*[\\']*|self)(?!\\w)"},"whitespace":{"name":"source koka.white","match":"[ \\t]+"},"wildcard":{"name":"source.wildcard koka.id.wildcard","match":"@?_[\\w\\-@]*[\\']*"}}}
